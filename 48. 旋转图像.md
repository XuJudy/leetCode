## 48. 旋转图像

> ##### 题目链接
>
> [48. 旋转图像](https://leetcode.cn/problems/rotate-image/)

##### 解题思路

根据题目要求，必须于原地进行图像的旋转，因此我们需先找出规律



先按照最简的想法就是建立**辅助数组**。

对于矩阵来说，第 i 行第 j 列个元素，反转后会出现在倒数第 i 行第 j 列个位置。

翻成代码即为 `matrix[row][col]` 反转后新位置为 `matrix_new[col][n-row-1]`。(matrix_new 为辅助数组)

再将辅助数组复制到原数组即可。



但题目要求不能再开一个数组，根据上述规律在进行延伸后，得一个关键等式为
$$
matrix[col][n-row-1] = matrix[row][cow]
$$
但若这样直接将 `matrix[row][cow]` 进原矩阵中的目标位置 `matrix[cow][n-row-1]` ，原矩阵中的 `matrix[cow][n-row-1]` 会被覆盖掉，因此我们还是需要使用一个临时变量 temp 进行存储，会变为:
$$
\begin{cases}
temp = matrix[cow][n-row-1]\\
matrix[col][n-row-1] = matrix[row][cow]\\
\end{cases}
$$
那么 `matrix[col][n-row-1]` 经过旋转后会到哪个位置?

我们还是用上面的关键等式，但这次需要将
$$
\begin{cases}
row = col\\
col = n - row - 1\\
\end{cases}
$$
带入关键等式，即可得到
$$
\begin{cases}
temp						= matrix[n-row-1][n-col-1]\\
matrix[n-row-1][n-col-1]	=  matrix[col][n-row-1]\\
matrix[col][n-row-1]		= matrix[row][cow]\\
\end{cases}
$$
同样的以此类推下去，最后可以得到
$$
\begin{cases}
temp						= matrix[row][col]\\
matrix[row][col]			= matrix[n-col-1][row]\\
matrix[n-col-1][row]		= matrix[n-row-1][n-col-1]\\
matrix[n-row-1][n-col-1]	= matrix[col][n-row-1]\\
matrix[col][n-row-1]		= temp\\
\end{cases}
$$
最后我们**回到起点**，这四项处于一个循环，每一项旋转后的位置就是下一项的所在位置。



知道如何进行旋转后，还有个重要的问题，就是**我们应该枚举哪些位置 (row, col) 进行操作**

- 当 n 为偶数时，我们须枚举 (n/2) * (n/2) 个位置
- 当 n 为奇数时，我们须枚举 (n+1/2) * (n/2) 个位置

如下图显示:                                        <img src=".\pic\leetcode_0048.jpg" alt="leetcode_0048" style="zoom:33%;" />



##### 代码实现

```cpp
class Solution {
public:
    void rotate(vector<vector<int>>& matrix) {
        
        int temp;
        int n = matrix.size();
        
        for(int row=0; row<(n+1)/2; row++){
            
            for(int col=0; col<n/2; col++){
                
                temp = matrix[row][col];
                matrix[row][col] = matrix[n-col-1][row];
                matrix[n-col-1][row] = matrix[n-row-1][n-col-1];
                matrix[n-row-1][n-col-1] =  matrix[col][n-row-1];
                matrix[col][n-row-1] = temp;
            }
        }
    }
};
```

